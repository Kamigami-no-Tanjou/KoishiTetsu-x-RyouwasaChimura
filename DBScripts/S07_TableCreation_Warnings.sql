USE ChimuraTest;

CREATE TABLE User(
    ID BIGINT UNSIGNED NOT NULL, -- Not auto incremented because these are generated by discord.
    LanguageID INT UNSIGNED NOT NULL DEFAULT 42,
    
    PRIMARY KEY(ID),
    FOREIGN KEY(LanguageID) REFERENCES Language(ID)
) ENGINE=INNODB;

ALTER TABLE RPGCharacter
    DROP COLUMN MemberID,
    ADD UserID BIGINT UNSIGNED NOT NULL
        AFTER ID,
    ADD FOREIGN KEY(UserID) REFERENCES User(ID)
;

CREATE TABLE Warning(
    ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    Amount INT UNSIGNED NOT NULL DEFAULT 0,
    LastUpdate DATE NOT NULL,
    UserID BIGINT UNSIGNED NOT NULL,
    GuildID BIGINT UNSIGNED NOT NULL,
    
    PRIMARY KEY(ID),
    FOREIGN KEY(UserID) REFERENCES User(ID),
    FOREIGN KEY(GuildID) REFERENCES Guild(ID)
) ENGINE=INNODB;